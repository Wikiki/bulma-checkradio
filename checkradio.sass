$checkbox-radius: $radius !default
$checkbox-border: .1rem solid $grey-lighter !default

=checkbox-size($size)
  $newSize: $size * 1.5
  $height: $newSize / 2.5
  $width: $newSize / 4

  + label
    font-size: $size
    // line-height: $newSize
    padding-left: $size * 2
    &::before
      width: $newSize
      height: $newSize
    &::after
      width: $width
      height: $height
      top: ( ( $newSize / 2 ) - ( $height / 2 ) ) / 2
      left: $height

// Use a mixin to define all ratios in the same spot
=radio-size($size)
  $newSize: $size * 1.5
  $radio-marker-size: $newSize * .5

  + label
    font-size: $size
    line-height: $newSize
    &::before
      width: $newSize
      height: $newSize
    &::after
      width: $radio-marker-size
      height: $radio-marker-size
      top: ( ( $newSize / 2 ) - ( $radio-marker-size / 2 ) ) / 2
      left: ( $newSize / 2 ) - ( $radio-marker-size / 2 )

.is-radio[type="radio"],
.is-checkbox[type="checkbox"]
  outline: 0
  user-select: none
  margin-bottom: 0
  opacity: 0
  position: absolute

  + label
    position: relative
    display: initial
    cursor: pointer
    vertical-align: middle
    margin-right: 0.5rem

    &:hover
      &::before
        animation-duration: 0.4s
        animation-fill-mode: both
        animation-name: hover-color

    &::before
      position: absolute
      left: 0
      top: -.2rem
      content: ''
      border: $checkbox-border

    &::after
      position: absolute
      display: none
      content: ''

  &:checked
    + label
      &::before
        border: $checkbox-border
    &[disabled]
      cursor: not-allowed
      + label
        opacity: 0.5
    + label
      &::before
        animation-name: none
      &::after
        display: initial

  &[disabled]
    cursor: not-allowed
    + label
      opacity: 0.5
      cursor: not-allowed
      &:hover,
      &:before,
      &:after
        cursor: not-allowed

    &:hover
      cursor: not-allowed
      &::before
        animation-name: none

    &::before
      cursor: not-allowed

    &::after
      cursor: not-allowed


  +checkbox-size($size-normal)
  &.is-small
    +checkbox-size($size-small)
  &.is-medium
    +checkbox-size($size-medium)
  &.is-large
    +checkbox-size($size-large)

  &.has-no-border
    + label
      &::before
        border: none !important


.is-checkbox[type="checkbox"]
  + label
    &::before
      border-radius: $checkbox-radius

    &::after
      box-sizing: border-box
      transform: rotate(45deg)
      border-width: .1rem
      border-style: solid
      border-color: $primary
      border-top: 0
      border-left: 0

  &.is-circle
    + label
      &::before
        border-radius: 50%

  @each $name, $pair in $colors
    $color: nth($pair, 1)
    $color-invert: nth($pair, 2)
    &.is-#{$name}
      &:checked
        + label
          &::after
            border-color: $color !important
        &.has-background-color
          + label
            &::before
              border-color: $color !important
              background-color: $color !important
            &::after
              border-color: $color-invert !important
              background-color: $color !important

.is-radio[type="radio"]
  + label
    &::before
      border-radius: 50%
    &::after
      border-radius: 50%
      background: $primary

  &:checked
    &.has-background-color
      + label
        &::before
          border-color: $primary !important

  +radio-size($size-normal)
  &.is-small
    +radio-size($size-small)
  &.is-medium
    +radio-size($size-medium)
  &.is-large
    +radio-size($size-large)

  @each $name, $pair in $colors
    $color: nth($pair, 1)
    $color-invert: nth($pair, 2)
    &.is-#{$name}
      &:checked
        + label
          &::after
            border-color: $color !important
            background-color: $color !important
        &.has-background-color
          + label
            &::before
              border-color: $color !important
            &::after
              border-color: $color !important
              background-color: $color !important
